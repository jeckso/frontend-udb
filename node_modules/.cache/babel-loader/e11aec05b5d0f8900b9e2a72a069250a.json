{"ast":null,"code":"var _jsxFileName = \"/Volumes/macApp/react/material-ui-table-crud-restapi/src/App.js\";\nimport React, { useState, useEffect } from 'react';\nimport './App.css';\nimport { forwardRef } from 'react';\nimport Avatar from 'react-avatar';\nimport Grid from '@material-ui/core/Grid';\nimport MaterialTable from \"material-table\";\nimport AddBox from '@material-ui/icons/AddBox';\nimport ArrowDownward from '@material-ui/icons/ArrowDownward';\nimport Check from '@material-ui/icons/Check';\nimport ChevronLeft from '@material-ui/icons/ChevronLeft';\nimport ChevronRight from '@material-ui/icons/ChevronRight';\nimport Clear from '@material-ui/icons/Clear';\nimport DeleteOutline from '@material-ui/icons/DeleteOutline';\nimport Edit from '@material-ui/icons/Edit';\nimport FilterList from '@material-ui/icons/FilterList';\nimport FirstPage from '@material-ui/icons/FirstPage';\nimport LastPage from '@material-ui/icons/LastPage';\nimport Remove from '@material-ui/icons/Remove';\nimport SaveAlt from '@material-ui/icons/SaveAlt';\nimport Search from '@material-ui/icons/Search';\nimport ViewColumn from '@material-ui/icons/ViewColumn';\nimport axios from 'axios';\nimport Alert from '@material-ui/lab/Alert';\nconst tableIcons = {\n  Add: forwardRef((props, ref) => /*#__PURE__*/React.createElement(AddBox, Object.assign({}, props, {\n    ref: ref,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 27,\n      columnNumber: 35\n    }\n  }))),\n  Check: forwardRef((props, ref) => /*#__PURE__*/React.createElement(Check, Object.assign({}, props, {\n    ref: ref,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 28,\n      columnNumber: 37\n    }\n  }))),\n  Clear: forwardRef((props, ref) => /*#__PURE__*/React.createElement(Clear, Object.assign({}, props, {\n    ref: ref,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 29,\n      columnNumber: 37\n    }\n  }))),\n  Delete: forwardRef((props, ref) => /*#__PURE__*/React.createElement(DeleteOutline, Object.assign({}, props, {\n    ref: ref,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 30,\n      columnNumber: 38\n    }\n  }))),\n  DetailPanel: forwardRef((props, ref) => /*#__PURE__*/React.createElement(ChevronRight, Object.assign({}, props, {\n    ref: ref,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 31,\n      columnNumber: 43\n    }\n  }))),\n  Edit: forwardRef((props, ref) => /*#__PURE__*/React.createElement(Edit, Object.assign({}, props, {\n    ref: ref,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 32,\n      columnNumber: 36\n    }\n  }))),\n  Export: forwardRef((props, ref) => /*#__PURE__*/React.createElement(SaveAlt, Object.assign({}, props, {\n    ref: ref,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 33,\n      columnNumber: 38\n    }\n  }))),\n  Filter: forwardRef((props, ref) => /*#__PURE__*/React.createElement(FilterList, Object.assign({}, props, {\n    ref: ref,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 38\n    }\n  }))),\n  FirstPage: forwardRef((props, ref) => /*#__PURE__*/React.createElement(FirstPage, Object.assign({}, props, {\n    ref: ref,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 41\n    }\n  }))),\n  LastPage: forwardRef((props, ref) => /*#__PURE__*/React.createElement(LastPage, Object.assign({}, props, {\n    ref: ref,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 40\n    }\n  }))),\n  NextPage: forwardRef((props, ref) => /*#__PURE__*/React.createElement(ChevronRight, Object.assign({}, props, {\n    ref: ref,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 40\n    }\n  }))),\n  PreviousPage: forwardRef((props, ref) => /*#__PURE__*/React.createElement(ChevronLeft, Object.assign({}, props, {\n    ref: ref,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 44\n    }\n  }))),\n  ResetSearch: forwardRef((props, ref) => /*#__PURE__*/React.createElement(Clear, Object.assign({}, props, {\n    ref: ref,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 43\n    }\n  }))),\n  Search: forwardRef((props, ref) => /*#__PURE__*/React.createElement(Search, Object.assign({}, props, {\n    ref: ref,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 38\n    }\n  }))),\n  SortArrow: forwardRef((props, ref) => /*#__PURE__*/React.createElement(ArrowDownward, Object.assign({}, props, {\n    ref: ref,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 41\n    }\n  }))),\n  ThirdStateCheck: forwardRef((props, ref) => /*#__PURE__*/React.createElement(Remove, Object.assign({}, props, {\n    ref: ref,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 47\n    }\n  }))),\n  ViewColumn: forwardRef((props, ref) => /*#__PURE__*/React.createElement(ViewColumn, Object.assign({}, props, {\n    ref: ref,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 42\n    }\n  })))\n};\nconst api = axios.create({\n  baseURL: `http://localhost:1337`\n});\n\nfunction validateEmail(email) {\n  const re = /^((?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|\"(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21\\x23-\\x5b\\x5d-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])*\")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21-\\x5a\\x53-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])+)\\]))$/;\n  return re.test(String(email).toLowerCase());\n}\n\nfunction App() {\n  var columns = [{\n    title: \"id\",\n    field: \"id\",\n    hidden: true\n  }, // {title: \"Avatar\", render: rowData => <Avatar maxInitials={1} size={40} round={true} name={rowData === undefined ? \" \" : rowData.first_name} />  },\n  {\n    title: \"Test\",\n    render: rowData => rowData.IsHead === \"Yes\" ? \"Так\" : \"Ні\"\n  }, {\n    title: \"Ім'я\",\n    field: \"FirstName\"\n  }, {\n    title: \"Побатькові\",\n    field: \"MiddleName\"\n  }, {\n    title: \"Прізвище\",\n    field: \"LastName\"\n  }, {\n    title: \"Староста\",\n    render: rowData => rowData.IsHead === true ? \"Так\" : \"Ні\"\n  }, {\n    title: \"Телефон\",\n    render: rowData => {\n      var result = \"\";\n      rowData.phone_numbers.forEach(number => result += number.PhoneNumber.toString() + \"/n\");\n      return result;\n    }\n  }, {\n    title: \"Форма оплати\",\n    render: rowData => rowData.IsContract === true ? \"Контракт\" : \"Бюджет\"\n  } // {title: \"email\", field: \"emails\"}\n  ];\n  const [data, setData] = useState([]); //table data\n  //for error handling\n\n  const [iserror, setIserror] = useState(false);\n  const [errorMessages, setErrorMessages] = useState([]);\n  useEffect(() => {\n    api.get(\"/students\").then(res => {\n      setData(res.data);\n    }).catch(error => {\n      console.log(\"Error\");\n    });\n  }, []);\n\n  const handleRowUpdate = (newData, oldData, resolve) => {\n    //validation\n    let errorList = [];\n\n    if (newData.first_name === \"\") {\n      errorList.push(\"Please enter first name\");\n    }\n\n    if (newData.last_name === \"\") {\n      errorList.push(\"Please enter last name\");\n    }\n\n    if (newData.email === \"\" || validateEmail(newData.email) === false) {\n      errorList.push(\"Please enter a valid email\");\n    }\n\n    if (errorList.length < 1) {\n      api.patch(\"/users/\" + newData.id, newData).then(res => {\n        const dataUpdate = [...data];\n        const index = oldData.tableData.id;\n        dataUpdate[index] = newData;\n        setData([...dataUpdate]);\n        resolve();\n        setIserror(false);\n        setErrorMessages([]);\n      }).catch(error => {\n        setErrorMessages([\"Update failed! Server error\"]);\n        setIserror(true);\n        resolve();\n      });\n    } else {\n      setErrorMessages(errorList);\n      setIserror(true);\n      resolve();\n    }\n  };\n\n  const handleRowAdd = (newData, resolve) => {\n    //validation\n    let errorList = [];\n\n    if (newData.first_name === undefined) {\n      errorList.push(\"Please enter first name\");\n    }\n\n    if (newData.last_name === undefined) {\n      errorList.push(\"Please enter last name\");\n    }\n\n    if (newData.email === undefined || validateEmail(newData.email) === false) {\n      errorList.push(\"Please enter a valid email\");\n    }\n\n    if (errorList.length < 1) {\n      //no error\n      api.post(\"/users\", newData).then(res => {\n        let dataToAdd = [...data];\n        dataToAdd.push(newData);\n        setData(dataToAdd);\n        resolve();\n        setErrorMessages([]);\n        setIserror(false);\n      }).catch(error => {\n        setErrorMessages([\"Cannot add data. Server error!\"]);\n        setIserror(true);\n        resolve();\n      });\n    } else {\n      setErrorMessages(errorList);\n      setIserror(true);\n      resolve();\n    }\n  };\n\n  const handleRowDelete = (oldData, resolve) => {\n    api.delete(\"/users/\" + oldData.id).then(res => {\n      const dataDelete = [...data];\n      const index = oldData.tableData.id;\n      dataDelete.splice(index, 1);\n      setData([...dataDelete]);\n      resolve();\n    }).catch(error => {\n      setErrorMessages([\"Delete failed! Server error\"]);\n      setIserror(true);\n      resolve();\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"App\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    spacing: 1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 3,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 11\n    }\n  }, iserror && /*#__PURE__*/React.createElement(Alert, {\n    severity: \"error\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 15\n    }\n  }, errorMessages.map((msg, i) => {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      key: i,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 30\n      }\n    }, msg);\n  }))), /*#__PURE__*/React.createElement(MaterialTable, {\n    title: \"User data from remote source\",\n    columns: columns,\n    data: data,\n    icons: tableIcons,\n    options: {\n      exportButton: true\n    },\n    editable: {\n      onRowUpdate: (newData, oldData) => new Promise(resolve => {\n        handleRowUpdate(newData, oldData, resolve);\n      }),\n      onRowAdd: newData => new Promise(resolve => {\n        handleRowAdd(newData, resolve);\n      }),\n      onRowDelete: oldData => new Promise(resolve => {\n        handleRowDelete(oldData, resolve);\n      })\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 3,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 224,\n      columnNumber: 11\n    }\n  })));\n}\n\nexport default App;","map":{"version":3,"sources":["/Volumes/macApp/react/material-ui-table-crud-restapi/src/App.js"],"names":["React","useState","useEffect","forwardRef","Avatar","Grid","MaterialTable","AddBox","ArrowDownward","Check","ChevronLeft","ChevronRight","Clear","DeleteOutline","Edit","FilterList","FirstPage","LastPage","Remove","SaveAlt","Search","ViewColumn","axios","Alert","tableIcons","Add","props","ref","Delete","DetailPanel","Export","Filter","NextPage","PreviousPage","ResetSearch","SortArrow","ThirdStateCheck","api","create","baseURL","validateEmail","email","re","test","String","toLowerCase","App","columns","title","field","hidden","render","rowData","IsHead","result","phone_numbers","forEach","number","PhoneNumber","toString","IsContract","data","setData","iserror","setIserror","errorMessages","setErrorMessages","get","then","res","catch","error","console","log","handleRowUpdate","newData","oldData","resolve","errorList","first_name","push","last_name","length","patch","id","dataUpdate","index","tableData","handleRowAdd","undefined","post","dataToAdd","handleRowDelete","delete","dataDelete","splice","map","msg","i","exportButton","onRowUpdate","Promise","onRowAdd","onRowDelete"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport './App.css';\nimport { forwardRef } from 'react';\nimport Avatar from 'react-avatar';\nimport Grid from '@material-ui/core/Grid'\n\nimport MaterialTable from \"material-table\";\nimport AddBox from '@material-ui/icons/AddBox';\nimport ArrowDownward from '@material-ui/icons/ArrowDownward';\nimport Check from '@material-ui/icons/Check';\nimport ChevronLeft from '@material-ui/icons/ChevronLeft';\nimport ChevronRight from '@material-ui/icons/ChevronRight';\nimport Clear from '@material-ui/icons/Clear';\nimport DeleteOutline from '@material-ui/icons/DeleteOutline';\nimport Edit from '@material-ui/icons/Edit';\nimport FilterList from '@material-ui/icons/FilterList';\nimport FirstPage from '@material-ui/icons/FirstPage';\nimport LastPage from '@material-ui/icons/LastPage';\nimport Remove from '@material-ui/icons/Remove';\nimport SaveAlt from '@material-ui/icons/SaveAlt';\nimport Search from '@material-ui/icons/Search';\nimport ViewColumn from '@material-ui/icons/ViewColumn';\nimport axios from 'axios'\nimport Alert from '@material-ui/lab/Alert';\n\nconst tableIcons = {\n  Add: forwardRef((props, ref) => <AddBox {...props} ref={ref} />),\n  Check: forwardRef((props, ref) => <Check {...props} ref={ref} />),\n  Clear: forwardRef((props, ref) => <Clear {...props} ref={ref} />),\n  Delete: forwardRef((props, ref) => <DeleteOutline {...props} ref={ref} />),\n  DetailPanel: forwardRef((props, ref) => <ChevronRight {...props} ref={ref} />),\n  Edit: forwardRef((props, ref) => <Edit {...props} ref={ref} />),\n  Export: forwardRef((props, ref) => <SaveAlt {...props} ref={ref} />),\n  Filter: forwardRef((props, ref) => <FilterList {...props} ref={ref} />),\n  FirstPage: forwardRef((props, ref) => <FirstPage {...props} ref={ref} />),\n  LastPage: forwardRef((props, ref) => <LastPage {...props} ref={ref} />),\n  NextPage: forwardRef((props, ref) => <ChevronRight {...props} ref={ref} />),\n  PreviousPage: forwardRef((props, ref) => <ChevronLeft {...props} ref={ref} />),\n  ResetSearch: forwardRef((props, ref) => <Clear {...props} ref={ref} />),\n  Search: forwardRef((props, ref) => <Search {...props} ref={ref} />),\n  SortArrow: forwardRef((props, ref) => <ArrowDownward {...props} ref={ref} />),\n  ThirdStateCheck: forwardRef((props, ref) => <Remove {...props} ref={ref} />),\n  ViewColumn: forwardRef((props, ref) => <ViewColumn {...props} ref={ref} />)\n};\n\nconst api = axios.create({\n  baseURL: `http://localhost:1337`\n})\n\n\nfunction validateEmail(email){\n  const re = /^((?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|\"(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21\\x23-\\x5b\\x5d-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])*\")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21-\\x5a\\x53-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])+)\\]))$/;\n  return re.test(String(email).toLowerCase());\n}\n\nfunction App() {\n\n  var columns = [\n    {title: \"id\", field: \"id\", hidden: true},\n   // {title: \"Avatar\", render: rowData => <Avatar maxInitials={1} size={40} round={true} name={rowData === undefined ? \" \" : rowData.first_name} />  },\n    {title: \"Test\", render: rowData => rowData.IsHead === \"Yes\" ? \"Так\" : \"Ні\" },\n    {title: \"Ім'я\", field: \"FirstName\"},\n    {title: \"Побатькові\", field: \"MiddleName\"},\n    {title: \"Прізвище\", field: \"LastName\"},\n    {title: \"Староста\", render: rowData => rowData.IsHead === true ? \"Так\" : \"Ні\"},\n    {title: \"Телефон\", render: rowData => {\n      var result=\"\"\n      rowData.phone_numbers.forEach(number => result+=number.PhoneNumber.toString()+\"/n\")\n      return result}\n     },\n    {title: \"Форма оплати\", render: rowData => rowData.IsContract === true ? \"Контракт\" : \"Бюджет\"}\n    // {title: \"email\", field: \"emails\"}\n  ]\n  const [data, setData] = useState([]); //table data\n\n  //for error handling\n  const [iserror, setIserror] = useState(false)\n  const [errorMessages, setErrorMessages] = useState([])\n\n  useEffect(() => { \n    api.get(\"/students\")\n        .then(res => {               \n            setData(res.data)\n         })\n         .catch(error=>{\n             console.log(\"Error\")\n         })\n  }, [])\n\n  const handleRowUpdate = (newData, oldData, resolve) => {\n    //validation\n    let errorList = []\n    if(newData.first_name === \"\"){\n      errorList.push(\"Please enter first name\")\n    }\n    if(newData.last_name === \"\"){\n      errorList.push(\"Please enter last name\")\n    }\n    if(newData.email === \"\" || validateEmail(newData.email) === false){\n      errorList.push(\"Please enter a valid email\")\n    }\n\n    if(errorList.length < 1){\n      api.patch(\"/users/\"+newData.id, newData)\n      .then(res => {\n        const dataUpdate = [...data];\n        const index = oldData.tableData.id;\n        dataUpdate[index] = newData;\n        setData([...dataUpdate]);\n        resolve()\n        setIserror(false)\n        setErrorMessages([])\n      })\n      .catch(error => {\n        setErrorMessages([\"Update failed! Server error\"])\n        setIserror(true)\n        resolve()\n        \n      })\n    }else{\n      setErrorMessages(errorList)\n      setIserror(true)\n      resolve()\n\n    }\n    \n  }\n\n  const handleRowAdd = (newData, resolve) => {\n    //validation\n    let errorList = []\n    if(newData.first_name === undefined){\n      errorList.push(\"Please enter first name\")\n    }\n    if(newData.last_name === undefined){\n      errorList.push(\"Please enter last name\")\n    }\n    if(newData.email === undefined || validateEmail(newData.email) === false){\n      errorList.push(\"Please enter a valid email\")\n    }\n\n    if(errorList.length < 1){ //no error\n      api.post(\"/users\", newData)\n      .then(res => {\n        let dataToAdd = [...data];\n        dataToAdd.push(newData);\n        setData(dataToAdd);\n        resolve()\n        setErrorMessages([])\n        setIserror(false)\n      })\n      .catch(error => {\n        setErrorMessages([\"Cannot add data. Server error!\"])\n        setIserror(true)\n        resolve()\n      })\n    }else{\n      setErrorMessages(errorList)\n      setIserror(true)\n      resolve()\n    }\n\n    \n  }\n\n  const handleRowDelete = (oldData, resolve) => {\n    \n    api.delete(\"/users/\"+oldData.id)\n      .then(res => {\n        const dataDelete = [...data];\n        const index = oldData.tableData.id;\n        dataDelete.splice(index, 1);\n        setData([...dataDelete]);\n        resolve()\n      })\n      .catch(error => {\n        setErrorMessages([\"Delete failed! Server error\"])\n        setIserror(true)\n        resolve()\n      })\n  }\n\n\n  return (\n    <div className=\"App\">\n      \n      <Grid container spacing={1}>\n          <Grid item xs={3}></Grid>\n          <Grid item xs={6}>\n          <div>\n            {iserror && \n              <Alert severity=\"error\">\n                  {errorMessages.map((msg, i) => {\n                      return <div key={i}>{msg}</div>\n                  })}\n              </Alert>\n            }       \n          </div>\n            <MaterialTable\n              title=\"User data from remote source\"\n              columns={columns}\n              data={data}\n              icons={tableIcons}\n              options={{\n                exportButton: true\n              }}\n              editable={{\n                onRowUpdate: (newData, oldData) =>\n                  new Promise((resolve) => {\n                      handleRowUpdate(newData, oldData, resolve);\n                      \n                  }),\n                onRowAdd: (newData) =>\n                  new Promise((resolve) => {\n                    handleRowAdd(newData, resolve)\n                  }),\n                onRowDelete: (oldData) =>\n                  new Promise((resolve) => {\n                    handleRowDelete(oldData, resolve)\n                  }),\n              }}\n            />\n          </Grid>\n          <Grid item xs={3}></Grid>\n        </Grid>\n    </div>\n  );\n}\n\nexport default App;"]},"metadata":{},"sourceType":"module"}