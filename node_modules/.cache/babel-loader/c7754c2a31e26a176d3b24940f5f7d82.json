{"ast":null,"code":"var _jsxFileName = \"/Volumes/macApp/react/material-ui-table-crud-restapi/src/App.js\";\nimport React, { useState, useEffect } from 'react';\nimport './App.css';\nimport { forwardRef } from 'react';\nimport Avatar from 'react-avatar';\nimport Grid from '@material-ui/core/Grid';\nimport MaterialTable from \"material-table\";\nimport AddBox from '@material-ui/icons/AddBox';\nimport ArrowDownward from '@material-ui/icons/ArrowDownward';\nimport Check from '@material-ui/icons/Check';\nimport ChevronLeft from '@material-ui/icons/ChevronLeft';\nimport ChevronRight from '@material-ui/icons/ChevronRight';\nimport Clear from '@material-ui/icons/Clear';\nimport DeleteOutline from '@material-ui/icons/DeleteOutline';\nimport Edit from '@material-ui/icons/Edit';\nimport FilterList from '@material-ui/icons/FilterList';\nimport FirstPage from '@material-ui/icons/FirstPage';\nimport LastPage from '@material-ui/icons/LastPage';\nimport Remove from '@material-ui/icons/Remove';\nimport SaveAlt from '@material-ui/icons/SaveAlt';\nimport Search from '@material-ui/icons/Search';\nimport ViewColumn from '@material-ui/icons/ViewColumn';\nimport axios from 'axios';\nimport Alert from '@material-ui/lab/Alert';\nconst tableIcons = {\n  Add: forwardRef((props, ref) => /*#__PURE__*/React.createElement(AddBox, Object.assign({}, props, {\n    ref: ref,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 27,\n      columnNumber: 37\n    }\n  }))),\n  Check: forwardRef((props, ref) => /*#__PURE__*/React.createElement(Check, Object.assign({}, props, {\n    ref: ref,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 28,\n      columnNumber: 39\n    }\n  }))),\n  Clear: forwardRef((props, ref) => /*#__PURE__*/React.createElement(Clear, Object.assign({}, props, {\n    ref: ref,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 29,\n      columnNumber: 39\n    }\n  }))),\n  Delete: forwardRef((props, ref) => /*#__PURE__*/React.createElement(DeleteOutline, Object.assign({}, props, {\n    ref: ref,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 30,\n      columnNumber: 40\n    }\n  }))),\n  DetailPanel: forwardRef((props, ref) => /*#__PURE__*/React.createElement(ChevronRight, Object.assign({}, props, {\n    ref: ref,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 31,\n      columnNumber: 45\n    }\n  }))),\n  Edit: forwardRef((props, ref) => /*#__PURE__*/React.createElement(Edit, Object.assign({}, props, {\n    ref: ref,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 32,\n      columnNumber: 38\n    }\n  }))),\n  Export: forwardRef((props, ref) => /*#__PURE__*/React.createElement(SaveAlt, Object.assign({}, props, {\n    ref: ref,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 33,\n      columnNumber: 40\n    }\n  }))),\n  Filter: forwardRef((props, ref) => /*#__PURE__*/React.createElement(FilterList, Object.assign({}, props, {\n    ref: ref,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 40\n    }\n  }))),\n  FirstPage: forwardRef((props, ref) => /*#__PURE__*/React.createElement(FirstPage, Object.assign({}, props, {\n    ref: ref,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 43\n    }\n  }))),\n  LastPage: forwardRef((props, ref) => /*#__PURE__*/React.createElement(LastPage, Object.assign({}, props, {\n    ref: ref,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 42\n    }\n  }))),\n  NextPage: forwardRef((props, ref) => /*#__PURE__*/React.createElement(ChevronRight, Object.assign({}, props, {\n    ref: ref,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 42\n    }\n  }))),\n  PreviousPage: forwardRef((props, ref) => /*#__PURE__*/React.createElement(ChevronLeft, Object.assign({}, props, {\n    ref: ref,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 46\n    }\n  }))),\n  ResetSearch: forwardRef((props, ref) => /*#__PURE__*/React.createElement(Clear, Object.assign({}, props, {\n    ref: ref,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 45\n    }\n  }))),\n  Search: forwardRef((props, ref) => /*#__PURE__*/React.createElement(Search, Object.assign({}, props, {\n    ref: ref,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 40\n    }\n  }))),\n  SortArrow: forwardRef((props, ref) => /*#__PURE__*/React.createElement(ArrowDownward, Object.assign({}, props, {\n    ref: ref,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 43\n    }\n  }))),\n  ThirdStateCheck: forwardRef((props, ref) => /*#__PURE__*/React.createElement(Remove, Object.assign({}, props, {\n    ref: ref,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 49\n    }\n  }))),\n  ViewColumn: forwardRef((props, ref) => /*#__PURE__*/React.createElement(ViewColumn, Object.assign({}, props, {\n    ref: ref,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 44\n    }\n  })))\n};\nconst api = axios.create({\n  baseURL: `http://localhost:1337`\n});\n\nfunction validateEmail(email) {\n  const re = /^((?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|\"(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21\\x23-\\x5b\\x5d-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])*\")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21-\\x5a\\x53-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])+)\\]))$/;\n  return re.test(String(email).toLowerCase());\n}\n\nfunction App() {\n  var parentColumns = [{\n    title: \"id\",\n    field: \"id\",\n    hidden: true\n  }, {\n    title: \"Ім'я\",\n    field: \"FirstName\"\n  }, {\n    title: \"Побатькові\",\n    field: \"MiddleName\"\n  }, {\n    title: \"Прізвище\",\n    field: \"LastName\"\n  }, {\n    title: \"Телефони\",\n    render: rowData => {\n      var result = \"\";\n      rowData.phone_numbers.slice().reverse().forEach(number => result += number.PhoneNumber.toString() + \"\\n\");\n      return result;\n    }\n  }, {\n    title: \"Адреси\",\n    render: rowData => {\n      var result = \"\";\n      rowData.addresses.slice().reverse().forEach(number => result += number.Address + \"\\n\");\n      return result;\n    }\n  }, {\n    title: \"Emails\",\n    render: rowData => {\n      var result = \"\";\n      rowData.emails.slice().reverse().forEach(number => result += number.Address + \"\\n\");\n      return result;\n    }\n  }];\n  var columns = [{\n    title: \"id\",\n    field: \"id\",\n    hidden: true\n  }, // {title: \"Avatar\", render: rowData => <Avatar maxInitials={1} size={40} round={true} name={rowData === undefined ? \" \" : rowData.first_name} />  },\n  {\n    title: \"Test\",\n    render: rowData => rowData.IsHead === \"Yes\" ? \"Так\" : \"Ні\"\n  }, {\n    title: \"Ім'я\",\n    field: \"FirstName\"\n  }, {\n    title: \"Побатькові\",\n    field: \"MiddleName\"\n  }, {\n    title: \"Прізвище\",\n    field: \"LastName\"\n  }, {\n    title: \"Староста\",\n    render: rowData => rowData.IsHead === true ? \"Так\" : \"Ні\"\n  }, {\n    title: \"Стипендія\",\n    render: rowData => rowData.Scholarship === true ? \"Так\" : \"Ні\"\n  }, // {\n  //     title: \"Інформація про батьків\", render: rowData => {\n  //         async function getParent(id) {\n  //             api.get('/parents/' + id)\n  //                 .then(res => {\n  //                     setParent(res.data)\n  //\n  //                 })\n  //                 .catch(error => {\n  //                     console.log(\"Error\")\n  //                 })\n  //         }\n  //\n  //         var result = \"\"\n  //         var resultedAddress = \"\"\n  //         var resultedPhones = \"\"\n  //         var resultedEmails = \"\"\n  //         rowData.parents.slice().reverse().forEach(parentResp => {\n  //                 result += parentResp.FirstName + \" \" + parentResp.MiddleName + \" \" + parentResp.LastName + \" \" + \"\\n\"\n  //                 getParent(parentResp.id).then(\n  //                     res => {\n  //                         console.log(\"HERE1\")\n  //                         parentData.addresses.slice().reverse().forEach(parentAddress => resultedAddress += parentAddress.Address + \"\\n\")\n  //                         parentData.phone_numbers.slice().reverse().forEach(parentPhone => resultedPhones += resultedPhones.PhoneNumber + \"\\n\")\n  //                         parentData.emails.slice().reverse().forEach(parentEmail => resultedEmails += resultedEmails.Email + \"\\n\")\n  //                         result = result += \"Адресси:\" + \"\\n\" + resultedAddress\n  //                         result = result += \"Телефони:\" + \"\\n\" + resultedPhones\n  //                         result = result += \"Emails:\" + \"\\n\" + resultedEmails\n  //                     }\n  //                 )\n  //\n  //\n  //             }\n  //         )\n  //         console.log(\"Here2\")\n  //         return result\n  //     }\n  // },\n  {\n    title: \"Телефон\",\n    render: rowData => {\n      var result = \"\";\n      rowData.phone_numbers.slice().reverse().forEach(number => result += number.PhoneNumber.toString() + \"\\n\");\n      return result;\n    }\n  }, {\n    title: \"Форма оплати\",\n    render: rowData => rowData.IsContract === true ? \"Контракт\" : \"Бюджет\"\n  } // {title: \"email\", field: \"emails\"}\n  ];\n  const [data, setData] = useState([]); //table data\n\n  const [parentData, setParent] = useState([]); //parent data\n  //for error handling\n\n  const [iserror, setIserror] = useState(false);\n  const [errorMessages, setErrorMessages] = useState([]);\n  useEffect(() => {\n    api.get(\"/students\").then(res => {\n      setData(res.data);\n    }).catch(error => {\n      console.log(\"Error\");\n    });\n  }, []);\n  useEffect(() => {\n    api.get('/parents').then(res => {\n      setParent(res.data);\n    }).catch(error => {\n      console.log(\"Error\");\n    });\n  }, []);\n\n  const handleRowUpdate = (newData, oldData, resolve) => {\n    //validation\n    let errorList = [];\n\n    if (newData.first_name === \"\") {\n      errorList.push(\"Please enter first name\");\n    }\n\n    if (newData.last_name === \"\") {\n      errorList.push(\"Please enter last name\");\n    }\n\n    if (newData.email === \"\" || validateEmail(newData.email) === false) {\n      errorList.push(\"Please enter a valid email\");\n    }\n\n    if (errorList.length < 1) {\n      api.patch(\"/users/\" + newData.id, newData).then(res => {\n        const dataUpdate = [...data];\n        const index = oldData.tableData.id;\n        dataUpdate[index] = newData;\n        setData([...dataUpdate]);\n        resolve();\n        setIserror(false);\n        setErrorMessages([]);\n      }).catch(error => {\n        setErrorMessages([\"Update failed! Server error\"]);\n        setIserror(true);\n        resolve();\n      });\n    } else {\n      setErrorMessages(errorList);\n      setIserror(true);\n      resolve();\n    }\n  };\n\n  const handleRowAdd = (newData, resolve) => {\n    //validation\n    let errorList = [];\n\n    if (newData.first_name === undefined) {\n      errorList.push(\"Please enter first name\");\n    }\n\n    if (newData.last_name === undefined) {\n      errorList.push(\"Please enter last name\");\n    }\n\n    if (newData.email === undefined || validateEmail(newData.email) === false) {\n      errorList.push(\"Please enter a valid email\");\n    }\n\n    if (errorList.length < 1) {\n      //no error\n      api.post(\"/users\", newData).then(res => {\n        let dataToAdd = [...data];\n        dataToAdd.push(newData);\n        setData(dataToAdd);\n        resolve();\n        setErrorMessages([]);\n        setIserror(false);\n      }).catch(error => {\n        setErrorMessages([\"Cannot add data. Server error!\"]);\n        setIserror(true);\n        resolve();\n      });\n    } else {\n      setErrorMessages(errorList);\n      setIserror(true);\n      resolve();\n    }\n  };\n\n  const handleRowDelete = (oldData, resolve) => {\n    api.delete(\"/users/\" + oldData.id).then(res => {\n      const dataDelete = [...data];\n      const index = oldData.tableData.id;\n      dataDelete.splice(index, 1);\n      setData([...dataDelete]);\n      resolve();\n    }).catch(error => {\n      setErrorMessages([\"Delete failed! Server error\"]);\n      setIserror(true);\n      resolve();\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"App\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 267,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    spacing: 1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 269,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 270,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 271,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 272,\n      columnNumber: 21\n    }\n  }, iserror && /*#__PURE__*/React.createElement(Alert, {\n    severity: \"error\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 274,\n      columnNumber: 25\n    }\n  }, errorMessages.map((msg, i) => {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      key: i,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 276,\n        columnNumber: 40\n      }\n    }, msg);\n  }))), /*#__PURE__*/React.createElement(MaterialTable, {\n    title: \"User data from remote source\",\n    columns: columns,\n    data: data,\n    icons: tableIcons,\n    options: {\n      exportButton: true\n    },\n    detailPanel: [{\n      tooltip: 'Show Parents',\n      render: rowData => {\n        return /*#__PURE__*/React.createElement(MaterialTable, {\n          title: \"Parent data from remote source\",\n          columns: parentColumns,\n          data: parentData.filter(parentItem => rowData.parents.some(item => item.id === parentItem.id)),\n          icons: tableIcons,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 294,\n            columnNumber: 41\n          }\n        });\n      }\n    }],\n    editable: {\n      onRowUpdate: (newData, oldData) => new Promise(resolve => {\n        handleRowUpdate(newData, oldData, resolve);\n      }),\n      onRowAdd: newData => new Promise(resolve => {\n        handleRowAdd(newData, resolve);\n      }),\n      onRowDelete: oldData => new Promise(resolve => {\n        handleRowDelete(oldData, resolve);\n      })\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 281,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 321,\n      columnNumber: 17\n    }\n  })));\n}\n\nexport default App;","map":{"version":3,"sources":["/Volumes/macApp/react/material-ui-table-crud-restapi/src/App.js"],"names":["React","useState","useEffect","forwardRef","Avatar","Grid","MaterialTable","AddBox","ArrowDownward","Check","ChevronLeft","ChevronRight","Clear","DeleteOutline","Edit","FilterList","FirstPage","LastPage","Remove","SaveAlt","Search","ViewColumn","axios","Alert","tableIcons","Add","props","ref","Delete","DetailPanel","Export","Filter","NextPage","PreviousPage","ResetSearch","SortArrow","ThirdStateCheck","api","create","baseURL","validateEmail","email","re","test","String","toLowerCase","App","parentColumns","title","field","hidden","render","rowData","result","phone_numbers","slice","reverse","forEach","number","PhoneNumber","toString","addresses","Address","emails","columns","IsHead","Scholarship","IsContract","data","setData","parentData","setParent","iserror","setIserror","errorMessages","setErrorMessages","get","then","res","catch","error","console","log","handleRowUpdate","newData","oldData","resolve","errorList","first_name","push","last_name","length","patch","id","dataUpdate","index","tableData","handleRowAdd","undefined","post","dataToAdd","handleRowDelete","delete","dataDelete","splice","map","msg","i","exportButton","tooltip","filter","parentItem","parents","some","item","onRowUpdate","Promise","onRowAdd","onRowDelete"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from 'react';\nimport './App.css';\nimport {forwardRef} from 'react';\nimport Avatar from 'react-avatar';\nimport Grid from '@material-ui/core/Grid'\n\nimport MaterialTable from \"material-table\";\nimport AddBox from '@material-ui/icons/AddBox';\nimport ArrowDownward from '@material-ui/icons/ArrowDownward';\nimport Check from '@material-ui/icons/Check';\nimport ChevronLeft from '@material-ui/icons/ChevronLeft';\nimport ChevronRight from '@material-ui/icons/ChevronRight';\nimport Clear from '@material-ui/icons/Clear';\nimport DeleteOutline from '@material-ui/icons/DeleteOutline';\nimport Edit from '@material-ui/icons/Edit';\nimport FilterList from '@material-ui/icons/FilterList';\nimport FirstPage from '@material-ui/icons/FirstPage';\nimport LastPage from '@material-ui/icons/LastPage';\nimport Remove from '@material-ui/icons/Remove';\nimport SaveAlt from '@material-ui/icons/SaveAlt';\nimport Search from '@material-ui/icons/Search';\nimport ViewColumn from '@material-ui/icons/ViewColumn';\nimport axios from 'axios'\nimport Alert from '@material-ui/lab/Alert';\n\nconst tableIcons = {\n    Add: forwardRef((props, ref) => <AddBox {...props} ref={ref}/>),\n    Check: forwardRef((props, ref) => <Check {...props} ref={ref}/>),\n    Clear: forwardRef((props, ref) => <Clear {...props} ref={ref}/>),\n    Delete: forwardRef((props, ref) => <DeleteOutline {...props} ref={ref}/>),\n    DetailPanel: forwardRef((props, ref) => <ChevronRight {...props} ref={ref}/>),\n    Edit: forwardRef((props, ref) => <Edit {...props} ref={ref}/>),\n    Export: forwardRef((props, ref) => <SaveAlt {...props} ref={ref}/>),\n    Filter: forwardRef((props, ref) => <FilterList {...props} ref={ref}/>),\n    FirstPage: forwardRef((props, ref) => <FirstPage {...props} ref={ref}/>),\n    LastPage: forwardRef((props, ref) => <LastPage {...props} ref={ref}/>),\n    NextPage: forwardRef((props, ref) => <ChevronRight {...props} ref={ref}/>),\n    PreviousPage: forwardRef((props, ref) => <ChevronLeft {...props} ref={ref}/>),\n    ResetSearch: forwardRef((props, ref) => <Clear {...props} ref={ref}/>),\n    Search: forwardRef((props, ref) => <Search {...props} ref={ref}/>),\n    SortArrow: forwardRef((props, ref) => <ArrowDownward {...props} ref={ref}/>),\n    ThirdStateCheck: forwardRef((props, ref) => <Remove {...props} ref={ref}/>),\n    ViewColumn: forwardRef((props, ref) => <ViewColumn {...props} ref={ref}/>)\n};\n\nconst api = axios.create({\n    baseURL: `http://localhost:1337`\n})\n\n\nfunction validateEmail(email) {\n    const re = /^((?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|\"(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21\\x23-\\x5b\\x5d-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])*\")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21-\\x5a\\x53-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])+)\\]))$/;\n    return re.test(String(email).toLowerCase());\n}\n\nfunction App() {\n\n    var parentColumns = [\n\n        {title: \"id\", field: \"id\", hidden: true},\n        {title: \"Ім'я\", field: \"FirstName\"},\n        {title: \"Побатькові\", field: \"MiddleName\"},\n        {title: \"Прізвище\", field: \"LastName\"},\n        {\n            title: \"Телефони\", render: rowData => {\n                var result = \"\"\n                rowData.phone_numbers.slice().reverse().forEach(number => result += number.PhoneNumber.toString() + \"\\n\")\n                return result\n            }\n        },\n        {\n            title: \"Адреси\", render: rowData => {\n                var result = \"\"\n                rowData.addresses.slice().reverse().forEach(number => result += number.Address + \"\\n\")\n                return result\n            }\n        },\n        {\n            title: \"Emails\", render: rowData => {\n                var result = \"\"\n                rowData.emails.slice().reverse().forEach(number => result += number.Address + \"\\n\")\n                return result\n            }\n        },\n    ]\n\n    var columns = [\n        {title: \"id\", field: \"id\", hidden: true},\n        // {title: \"Avatar\", render: rowData => <Avatar maxInitials={1} size={40} round={true} name={rowData === undefined ? \" \" : rowData.first_name} />  },\n        {title: \"Test\", render: rowData => rowData.IsHead === \"Yes\" ? \"Так\" : \"Ні\"},\n        {title: \"Ім'я\", field: \"FirstName\"},\n        {title: \"Побатькові\", field: \"MiddleName\"},\n        {title: \"Прізвище\", field: \"LastName\"},\n        {title: \"Староста\", render: rowData => rowData.IsHead === true ? \"Так\" : \"Ні\"},\n        {title: \"Стипендія\", render: rowData => rowData.Scholarship === true ? \"Так\" : \"Ні\"},\n        // {\n        //     title: \"Інформація про батьків\", render: rowData => {\n        //         async function getParent(id) {\n        //             api.get('/parents/' + id)\n        //                 .then(res => {\n        //                     setParent(res.data)\n        //\n        //                 })\n        //                 .catch(error => {\n        //                     console.log(\"Error\")\n        //                 })\n        //         }\n        //\n        //         var result = \"\"\n        //         var resultedAddress = \"\"\n        //         var resultedPhones = \"\"\n        //         var resultedEmails = \"\"\n        //         rowData.parents.slice().reverse().forEach(parentResp => {\n        //                 result += parentResp.FirstName + \" \" + parentResp.MiddleName + \" \" + parentResp.LastName + \" \" + \"\\n\"\n        //                 getParent(parentResp.id).then(\n        //                     res => {\n        //                         console.log(\"HERE1\")\n        //                         parentData.addresses.slice().reverse().forEach(parentAddress => resultedAddress += parentAddress.Address + \"\\n\")\n        //                         parentData.phone_numbers.slice().reverse().forEach(parentPhone => resultedPhones += resultedPhones.PhoneNumber + \"\\n\")\n        //                         parentData.emails.slice().reverse().forEach(parentEmail => resultedEmails += resultedEmails.Email + \"\\n\")\n        //                         result = result += \"Адресси:\" + \"\\n\" + resultedAddress\n        //                         result = result += \"Телефони:\" + \"\\n\" + resultedPhones\n        //                         result = result += \"Emails:\" + \"\\n\" + resultedEmails\n        //                     }\n        //                 )\n        //\n        //\n        //             }\n        //         )\n        //         console.log(\"Here2\")\n        //         return result\n        //     }\n        // },\n        {\n            title: \"Телефон\", render: rowData => {\n                var result = \"\"\n                rowData.phone_numbers.slice().reverse().forEach(number => result += number.PhoneNumber.toString() + \"\\n\")\n                return result\n            }\n        },\n        {title: \"Форма оплати\", render: rowData => rowData.IsContract === true ? \"Контракт\" : \"Бюджет\"}\n        // {title: \"email\", field: \"emails\"}\n    ]\n    const [data, setData] = useState([]); //table data\n    const [parentData, setParent] = useState([]); //parent data\n\n    //for error handling\n    const [iserror, setIserror] = useState(false)\n    const [errorMessages, setErrorMessages] = useState([])\n\n    useEffect(() => {\n        api.get(\"/students\")\n            .then(res => {\n                setData(res.data)\n            })\n            .catch(error => {\n                console.log(\"Error\")\n            })\n    }, [])\n\n    useEffect(() => {\n        api.get('/parents')\n            .then(res => {\n                setParent(res.data)\n\n            })\n            .catch(error => {\n                console.log(\"Error\")\n            })\n    }, [])\n\n    const handleRowUpdate = (newData, oldData, resolve) => {\n        //validation\n        let errorList = []\n        if (newData.first_name === \"\") {\n            errorList.push(\"Please enter first name\")\n        }\n        if (newData.last_name === \"\") {\n            errorList.push(\"Please enter last name\")\n        }\n        if (newData.email === \"\" || validateEmail(newData.email) === false) {\n            errorList.push(\"Please enter a valid email\")\n        }\n\n        if (errorList.length < 1) {\n            api.patch(\"/users/\" + newData.id, newData)\n                .then(res => {\n                    const dataUpdate = [...data];\n                    const index = oldData.tableData.id;\n                    dataUpdate[index] = newData;\n                    setData([...dataUpdate]);\n                    resolve()\n                    setIserror(false)\n                    setErrorMessages([])\n                })\n                .catch(error => {\n                    setErrorMessages([\"Update failed! Server error\"])\n                    setIserror(true)\n                    resolve()\n\n                })\n        } else {\n            setErrorMessages(errorList)\n            setIserror(true)\n            resolve()\n\n        }\n\n    }\n\n    const handleRowAdd = (newData, resolve) => {\n        //validation\n        let errorList = []\n        if (newData.first_name === undefined) {\n            errorList.push(\"Please enter first name\")\n        }\n        if (newData.last_name === undefined) {\n            errorList.push(\"Please enter last name\")\n        }\n        if (newData.email === undefined || validateEmail(newData.email) === false) {\n            errorList.push(\"Please enter a valid email\")\n        }\n\n        if (errorList.length < 1) { //no error\n            api.post(\"/users\", newData)\n                .then(res => {\n                    let dataToAdd = [...data];\n                    dataToAdd.push(newData);\n                    setData(dataToAdd);\n                    resolve()\n                    setErrorMessages([])\n                    setIserror(false)\n                })\n                .catch(error => {\n                    setErrorMessages([\"Cannot add data. Server error!\"])\n                    setIserror(true)\n                    resolve()\n                })\n        } else {\n            setErrorMessages(errorList)\n            setIserror(true)\n            resolve()\n        }\n\n\n    }\n\n    const handleRowDelete = (oldData, resolve) => {\n\n        api.delete(\"/users/\" + oldData.id)\n            .then(res => {\n                const dataDelete = [...data];\n                const index = oldData.tableData.id;\n                dataDelete.splice(index, 1);\n                setData([...dataDelete]);\n                resolve()\n            })\n            .catch(error => {\n                setErrorMessages([\"Delete failed! Server error\"])\n                setIserror(true)\n                resolve()\n            })\n    }\n\n\n    return (\n        <div className=\"App\">\n\n            <Grid container spacing={1}>\n                <Grid item xs={12}></Grid>\n                <Grid item xs={12}>\n                    <div>\n                        {iserror &&\n                        <Alert severity=\"error\">\n                            {errorMessages.map((msg, i) => {\n                                return <div key={i}>{msg}</div>\n                            })}\n                        </Alert>\n                        }\n                    </div>\n                    <MaterialTable\n                        title=\"User data from remote source\"\n                        columns={columns}\n                        data={data}\n                        icons={tableIcons}\n                        options={{\n                            exportButton: true\n                        }}\n                        detailPanel={[\n                            {\n                                tooltip: 'Show Parents',\n                                render: rowData => {\n                                    return (\n                                        <MaterialTable\n                                            title=\"Parent data from remote source\"\n                                            columns={parentColumns}\n                                            data={parentData.filter(parentItem => rowData.parents.some(item => item.id === parentItem.id))}\n\n                                            icons={tableIcons}\n                                        />\n                                    )\n                                }\n                            }]}\n                        editable={{\n                            onRowUpdate: (newData, oldData) =>\n                                new Promise((resolve) => {\n                                    handleRowUpdate(newData, oldData, resolve);\n\n                                }),\n                            onRowAdd: (newData) =>\n                                new Promise((resolve) => {\n                                    handleRowAdd(newData, resolve)\n                                }),\n                            onRowDelete: (oldData) =>\n                                new Promise((resolve) => {\n                                    handleRowDelete(oldData, resolve)\n                                })\n                        }}\n                    />\n                </Grid>\n                <Grid item xs={12}></Grid>\n            </Grid>\n        </div>\n    );\n}\n\nexport default App;"]},"metadata":{},"sourceType":"module"}